--- /dev/null
+++ b/README.md
@@ -0,0 +1,104 @@
+# TradeManager MQL5 Expert Advisor

- +`TradeManager` - это Советник (Expert Advisor) для MetaTrader 5, предназначенный для упрощения процесса торговли путем предоставления визуальных инструментов на графике для установки ордеров, управления рисками и отслеживания позиций.
- +## Описание
- +Советник добавляет на график интерактивные элементы управления, которые позволяют трейдеру: +_ Размещать отложенные ордера (Pending Orders) с визуальным указанием цены входа и стоп-лосса. +_ Рассчитывать объем лота на основе заданного процента риска от баланса счета. +_ Модифицировать стоп-лосс и тейк-профит существующих позиций. +_ Отображать важную информацию прямо на графике: спред, количество и объем открытых позиций, уровни стопов брокера.
  +\* Настраивать визуальное оформление графика и торговых уровней.
- +## Основные возможности
- +\* **Визуальное размещение ордеров:**
- - Кнопка "Pending" для активации режима установки отложенного ордера.
- - Клик на графике для установки уровня входа, затем второй клик для установки стоп-лосса.
- - Автоматический расчет типа отложенного ордера (Buy/Sell Limit/Stop) на основе положения уровней относительно текущей цены.
    +\* **Управление риском:**
- - Возможность выбора одного из пяти предустановленных уровней риска (в % от баланса).
- - Автоматический расчет объема лота для отложенного ордера на основе выбранного риска и расстояния до стоп-лосса.
    +\* **Управление позициями:**
- - Кнопка "Modify Positions" для активации режима модификации TP/SL существующих позиций.
- - Визуальное перетаскивание уровня для установки нового TP или SL.
- - Диалоговое окно для выбора направления (Buy/Sell) при наличии разнонаправленных позиций.
    +\* **Информационные панели на графике:**
- - Отображение текущего спреда.
- - Отображение количества и суммарного объема открытых Buy и Sell позиций.
- - Отображение водяного знака с названием инструмента и таймфрейма.
- - Отображение уровней Stop Level брокера.
    +\* **Настраиваемый интерфейс:**
- - Возможность включения/отключения пользовательских настроек визуализации графика.
- - Настройка цветов и толщины линий для отложенных ордеров, стоп-лоссов и уровней модификации.
- - Настройка цветов текстовых меток.
    +\* **Дополнительные кнопки управления:**
- - "Cancel Orders": Отмена всех отложенных ордеров по текущему символу.
- - "Close Positions": Закрытие всех открытых позиций по текущему символу.
- - Кнопка сворачивания/разворачивания панели кнопок для экономии места на графике.
- +## Структура проекта
- +_ `TradeManager.mq5`: Главный файл советника, инициализирует приложение и обрабатывает события терминала. +_ `Application.mqh`: Основной класс, управляющий логикой советника, включая инициализацию, обработку событий, управление уровнями и отображение информации. +_ `ChartButtons.mqh`: Класс для создания и управления кнопками на графике (Pending Order, Cancel Orders, Close Positions, Modify Positions, DotButton). +_ `ChartLabels.mqh`: Класс для создания и управления текстовыми метками на графике (спред, информация о позициях, водяной знак). +_ `DialogWindow.mqh`: Класс для создания и управления диалоговым окном (например, для выбора направления модификации позиций). +_ `StopLevel.mqh`: Класс для отображения уровней Stop Level брокера на графике. +_ `TradeLevel.mqh`: Класс для создания и управления интерактивными торговыми уровнями на графике (вход, стоп-лосс, модификация). Включает кнопки для отправки ордера, выбора риска и отмены уровня. +_ `TradeHelper.mqh`: Вспомогательный класс со статическими методами для выполнения торговых операций (отправка ордеров, модификация, закрытие), расчета лота, подсчета ордеров/позиций и получения торговой информации.
  +\* `Helper.mqh`: Общий вспомогательный класс, содержащий перечисление пользовательских событий и утилитарные функции (например, проверка существования объекта, получение времени конца дня).
- +## Установка
- +1. Скопируйте все файлы (`.mq5` и `.mqh`) в соответствующую папку вашего терминала MetaTrader 5: `MQL5\Experts\Advisors\TradeManager\` (при необходимости создайте папку `TradeManager`).

1.  В MetaTrader 5 откройте "Навигатор", щелкните правой кнопкой мыши по "Советники" и выберите "Обновить".
2.  Найдите `TradeManager` в списке советников и перетащите его на нужный график.

- +## Входные параметры
- +Советник имеет множество входных параметров, позволяющих настроить его поведение и внешний вид:
- +\* **Visual chart settings:**
- - `inputEnableCustomChartSettings`: Включить пользовательские настройки визуализации графика.
- - `inputShowWatermark`: Показывать водяной знак.
- - `inputWatermarkLabelColor`: Цвет водяного знака.
    +\* **Visual trade levels settings:**
- - `inputPendingOrderColor`: Цвет линии отложенного ордера.
- - `inputPendingOrderLineWidth`: Толщина линии отложенного ордера.
- - `inputPendingOrderLabelColor`: Цвет текста уровня отложенного ордера.
- - `inputStoplossColor`: Цвет линии стоп-лосса.
- - `inputStoplossLineWidth`: Толщина линии стоп-лосса.
- - `inputStoplossLabelColor`: Цвет текста уровня стоп-лосса.
- - `inputModifyPositionsColor`: Цвет линии модификации позиций.
- - `inputModifyPositionsLineWidth`: Толщина линии модификации позиций.
- - `inputModifyPositionsLabelColor`: Цвет текста уровня модификации позиций.
    +\* **Risk % per trade:**
- - `inputRisk1` - `inputRisk5`: Пять предустановленных значений риска в процентах для быстрого выбора.
    +\* **Text information on chart:**
- - `inputShowPositionsQtLabel`: Показывать количество и объем открытых позиций.
- - `inputShowSpread`: Показывать спред.
- - `inputInfoLabelsColor`: Цвет информационных меток.
    +\* **Stop level:**
- - `inputShowStopLevels`: Показывать уровни Stop Level брокера.
- - `inputStopLevelUpLineColor`: Цвет верхней линии Stop Level.
- - `inputStopLevelDownLineColor`: Цвет нижней линии Stop Level.
- - `inputStopLevelLineWidth`: Толщина линий Stop Level.
- +## Использование
- +1. **Размещение отложенного ордера:**
- - Нажмите кнопку "Pending". Курсор изменится.
- - Кликните на графике в месте предполагаемого входа. Появится линия входа.
- - Кликните второй раз для установки стоп-лосса. Появится линия стоп-лосса и кнопки управления уровнем.
- - Используйте кнопку с процентом риска для выбора желаемого риска.
- - Нажмите кнопку "Send" для отправки отложенного ордера.
    +2. **Модификация позиций:**
- - Нажмите кнопку "Modify Positions". Курсор изменится.
- - Кликните на графике для установки уровня модификации (новый TP или SL).
- - Если открыты и покупки, и продажи, появится диалог для выбора направления модифицируемых позиций.
- - Нажмите кнопку "Send" для модификации соответствующих TP или SL у выбранных позиций.
    +3. **Другие кнопки:**
- - "Cancel Orders": Отменяет все отложенные ордера на текущем инструменте.
- - "Close Positions": Закрывает все открытые позиции на текущем инструменте.
- - Кнопка ":<" / ":>" (DotButton): Сворачивает/разворачивает панель кнопок.
